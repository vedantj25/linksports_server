<% content_for :admin_breadcrumb do %>
  <%= link_to 'Posts', admin_posts_path %> <span class="divider">/</span> <span>Post #<%= @post.id %></span>
<% end %>

<div class="container-fluid">
  <h1 class="h3 mb-3">Post #<%= @post.id %></h1>
  <p><strong>User:</strong> <%= link_to @post.user.display_name, admin_user_path(@post.user) %></p>
  <p><strong>Content:</strong></p>
  <pre><%= @post.content %></pre>
  <p><strong>Visibility:</strong> <%= @post.visibility %></p>

  <div class="mt-3 d-flex flex-wrap gap-2">
    <%= button_to "Hide", hide_admin_post_path(@post), method: :patch, class: "btn btn-warning" %>
    <%= button_to "Unhide", unhide_admin_post_path(@post), method: :patch, class: "btn btn-success" %>
    <%= button_to "Disable Comments", disable_comments_admin_post_path(@post), method: :patch, class: "btn btn-secondary" %>
    <%= button_to "Enable Comments", enable_comments_admin_post_path(@post), method: :patch, class: "btn btn-secondary" %>
    <%= button_to "Soft Delete", soft_delete_admin_post_path(@post), method: :patch, class: "btn btn-danger" %>
    <%= button_to "Restore", restore_admin_post_path(@post), method: :patch, class: "btn btn-success" %>
  </div>

  <div class="mt-4">
    <h3>Edit</h3>
    <%= form_with model: [:admin, @post], local: true do |f| %>
      <div class="mb-3">
        <%= f.label :content %>
        <%= f.text_area :content, class: "form-control", rows: 6 %>
      </div>
      <div class="mb-3">
        <%= f.label :visibility %>
        <%= f.select :visibility, Post.visibilities.keys.map { |v| [v.humanize, v] }, {}, class: "form-select" %>
      </div>
      <%= f.submit "Save", class: "btn btn-primary" %>
    <% end %>
  </div>
</div>


