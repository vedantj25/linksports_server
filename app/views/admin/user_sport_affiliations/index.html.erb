<div class="container-fluid">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4>Affiliations for <%= @user_sport.sport.name %> — <%= @user.display_name %></h4>
    <%= link_to 'Add Affiliation', new_admin_user_user_sport_affiliation_path(@user, @user_sport), class: 'btn btn-primary' %>
  </div>
  <div class="admin-table-wrapper">
  <table class="table table-striped admin-table-sticky">
    <thead>
      <tr>
        <th class="td-nowrap">Club/Team</th>
        <th class="td-nowrap">League</th>
        <th class="td-nowrap">Duration</th>
        <th class="td-nowrap">Current</th>
        <th class="td-nowrap"></th>
      </tr>
    </thead>
    <tbody>
      <% @affiliations.each do |aff| %>
        <tr>
          <td class="td-truncate"><%= aff.club_team_name %></td>
          <td class="td-truncate"><%= aff.league_competition %></td>
          <td class="td-nowrap">
            <% start_label = [aff.start_month && Date::MONTHNAMES[aff.start_month], aff.start_year].compact.join(' ') %>
            <% end_label = aff.current ? 'Present' : [aff.end_month && Date::MONTHNAMES[aff.end_month], aff.end_year].compact.join(' ') %>
            <%= [start_label.presence, end_label.presence].compact.join(' – ') %>
          </td>
          <td class="td-nowrap"><%= aff.current ? 'Yes' : 'No' %></td>
          <td class="text-end td-nowrap">
            <%= link_to 'Edit', edit_admin_user_user_sport_affiliation_path(@user, @user_sport, aff), class: 'btn btn-sm btn-outline-primary' %>
            <%= link_to 'Delete', admin_user_user_sport_affiliation_path(@user, @user_sport, aff), data: { turbo_method: :delete, turbo_confirm: 'Are you sure?' }, class: 'btn btn-sm btn-outline-danger' %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
  </div>
</div>


